

bugs: 

[ ] single click breaks at some poin, maybe after loading or double clicking

[ ] flickering when resizing introduced after adding overlay
[ ] when resizing, black bars exist in the new space 
    (maybe render after resize, or always stretch render buffer to screen?)
[ ] black bar when loading new video is different size 
    (window resized before display buffer i guess)


todo:

[ ] handle fps, timing etc correctly when no video loaded


[ ] narrow down what dlls we actually need?


[ ] playlist support
    [ ] drop in folder
    [ ] drop in text file list / string list
    [ ] yt playlist
    [ ] autoplay (yt+others?)
    [ ] view to-play list somehow
    [ ] re-arrange / shuffle / random


[ ] improve video resize quality (compare to vlc eg)


[x] load random url vid if internet, otherwise none


[ ] alt tab should close the menu probably 
    (doesn't work if highlighting submenu)


[x] command line options
    [x] menu options
    [ ] positioning/sizing options [add checkmark when done]

[/] overlay display: play/pause feedback, etc
    [x] basic single messages
    [ ] icon/bitmaps (esp play/pause)
    [ ] multiple messages
    [ ] display scrolling log?


[?] percent bar incorrect when seeking some urls?
    [ ] which?


[/] seems like mem leak on loading files
    [ ] looks like small one still there
    [x] big one fixed


[ ] needs a few abstraction cleanup passes
    [ ] menu windows
    [ ] wallpaper window?
    [ ] app/plat interface?
    [ ] app/plat inter thread communication
    [ ] a sort of message system for update loop communication? load video, seek, etc


[ ] decouple display from frames decoded so we can decode from network easier? 
    [ ] with caching
    [ ] and buffering

[ ] look into how ffmpeg dls videos -- cache anywhere?

[ ] need to dl a low quality version first or we'll lag on large files??
    (definite delay but maybe not correlated to vid size)





---intermittent bugs---


[ ] menu hiding but submenu not if submenu off main window
    hiding submenu when closing menu now, keep eye out for this
    update: definitely still happening

[ ] menu bar not hiding when mouse stays still (flickers off then on)

[ ] video was paused when unfullscreening and could not be unpaused again 
    (like it was ignoring single clicks)
    happened when unfullscreening a very vertical video.. maybe second click was off window or something?
    seems to happen when switching a lot between fullscreen via double 
    [ ] debug display state [viewing mouse flags would probably fix this quickly]



---low priority----


[ ] opacity doesn't seem to work in wallpaper mode, but not really wanted too badly anyway
    could maybe do something funny with workerW to get it to work, 
    since workerW is originally for fading between wallpapers

[/] extra bar on right of some vids
    [x] temp fix by using a constant-size buffer
    [ ] use same size as overlay buffer?

[/] lose transparency on full screen
    [x] temp workaround by keeping 1 pixel smaller than monitor size
    [ ] problem is we now have to be set topmost when fullscreen to get over the taskbar


[ ] more than one audio stream
[?] more than one video stream??
    [x] give us a message if we ever see these
    [ ] just get a big collection of different videos to test at some point


[/] window controls are laggy on second ghoster window
    this is starting to feel like an nvidia driver bug
    [x] .bat file workaround
    [ ] "launcher" exe workaround?



---consider-----

step forward and backwards by a single frame?


manual crop by resize borders but keeping window same? 
maybe with middle mouse button
and track with middle mouse, like a pdf or something


when playing url...
..d/l asyn high quality
..play low quality instantly, switching to high quality on the fly?


replace youtube-dl with homegrown/internal variant?

grown/shrink which side of window based on screen location when changing aspect ratio??


add icon to pause/play menu item


if ghost mode forced always on top, should it also be automatically disabled when leaving ghost mode?


if we pre-process the file in parallel to display, we could seek much faster on files with spaced out I-frames



write text on the image directly with ffmpeg?

low vid framerate (eg maybe if audio only),
things that we check each loop like if mouse leaves window will feel very slow
their responsiveness is basically frame rate dependent

kind of annoying...
if we are fullscreen ghost mode transparent and disable ghost mode, 
trying to click on the task bar will seek somewhere else in the video
maybe disabling ghost mode should always reset opacity and topmost??
and should it set our opacity much lower too? i guess not


---instructions-------

to load a file

pass path as argument
drag file onto window
drag url onto window
paste (ctrl+V) url or path from clipboard while window active
rclick menu, paste url or path
rclick menu, open file... ?



---notes---


debug print these cases--
PTS out of order
any b frames?
repeat_pict?


use avframe repeat_pict ?




fluid buffering----

[xxx        ] time playing
[.....      ] time buffered

two threads 
-1 getting video quickly as possible given what we have and time until we run out
-1 grabbing highest res frame avil for next frame, buffer if none avail


i/o loop
-fast, responsive
-no drops
-animate if waiting for data


d/l / decode loop
-get data asap, even if low qual
-improve qual asap
-ok to wait, esp if video playing, but w/in reason (timeout?)



---fun----

preview random frame when loading while paused

filters!
pixel shaders, eg splash on click

random a/v mashup

random video [maybe 'i'm feeling lucky' style]

green screen masking type functionality?

if no video, visualize audio

face detection googly eyes? no, that's taking it too far

